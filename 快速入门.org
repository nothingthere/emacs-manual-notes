* Emacs入门教程

*说明*:使用purcell大神配置后，本turorial教程与官方教程有区别。

- C-x C-c :: 退出Emacs。
- C-g :: 取消指令。
- C-V :: 向下滚动屏幕。会将上一屏的文字保留一行。
- M-V :: 向上滚屏。
- C-l :: 将光标所处行至于显示区域中间/底部/顶部。（默认为中间，一直按
         会循环这3个位置）

** 基本光标控制指令

                            上一行，C-p
                                  :
                                  :
            向后一个字符，C-b .... .... 向前一个字符， C-f
                                  :
                                  :
                            下一行，C-n

- M-f :: 向前移动一个单词
- M-b :: 向后移动一个单词

- C-a :: 移至行首
- C-e :: 移至行尾

- M-a :: 移回到句子首部
- M-e :: 移至句子尾部

- M-< :: 移动到文档顶部
- M-> :: 移动到文档尾部

- C-u :: 为指令添加前置参数。如C-u 8 C-f为向前移动8个字符。
也可使用M-8 C-f形式，不过前者兼容性更好。

** 中断指令

- C-g :: 中途中断命令

有如下情况：
1. 如命令执行时间过长，可在中断。
2. 使用C-u添加参数时，可取消参数。如已输入C-u 100，使用C-u后在输入C-f
   只会向前移动1个字符。

** 被禁用的指令

某些命令某人被“禁用”，当输入该命令时（如C-x C-l）会提示是否执行。使用
<SPC>（空格）执行，“n”取消执行。

** 窗口

Emacs可有多个“窗口”，每个显示一份文本。稍后会介绍更多有关窗口的用法，
此处只介绍一个命令：

- C-x 1 :: 关闭除当前窗口外的所有窗口。

Emacs中CONTROL-x命令中很多都是关于窗口，文件和缓冲区的命令。

** 插入和删除

插入文本正常输入即可。也可使用命令参数实现同时输入多个字符，如C-u 8 a
可实现同时输入8个字符“a”。

当文本长度超过窗口显示宽度后，不自动换行，以特殊字符标记改行继续延伸，
如“$”或“\”。

删除文本的命令有：
- <DEL> :: 删除光标前一个字符。
/Emacs中使用<DEl>标记“Backspace”键/
- C-d :: 删除光标后一个字符。

- M-<DEL> :: 删除光标前一个单词。
- M-d :: 删除光标后一个单词。

- C-k :: 从光标处删除到行尾。
- M-k :: 从光标处删除到句尾。

删除文本块的实现过程为：
1. 使用C-Shift-<SPC>标记开始区域，将光标移动到文本块结束区域。
2. 使用C-w删除选中区域，或使用M-w复制选中区域。

上述删除为"killing"形式，还有一种删除为“deleting”形式。区别为前者可用
于粘贴，后者不可。后者只能通过“反悔”操作找回消失的文本。<DEL>和C-d就为
"deleting"形式。

文本粘贴：

- C-y :: 粘贴最近文本。
- M-y :: 如果想粘贴之前剪切或复制的文本，执行C-y后使用此命令可往后循环。

** 反悔

C-/、C-x u和C-_都可实现反悔操作。说明：
1. 只有对改变文本的命令实现反悔，如光标移动和翻页操作不能实现反悔。
2. 输入字符时，如果反悔会默认删除前20个刚输入的字符。

** 文件操作

文件名显示在状态栏如：" -:--- TUTORIAL"。

- C-x C-f :: 寻找文件。
如果文件不存在，则会新建。
- C-x C-s :: 保存文件。

** 缓存

Emacs中编辑的文件只是该文件的副本，称为“缓存文件（buffer）”，只有保存
后才正真更改该文件。

- C-x C-b :: 列出所有缓存文件。
- C-x b :: 打开缓存文件。可使用<Tab>自动补全。

** 命令扩展

Emacs有许多命令，也可定制命令（命令扩展）。命令扩展有2种形式：

1. C-x :: 字符扩展。后跟一个字符。
如已见的C-x C-f和C-x b。再比如C-z命令：在命令行中“休眠”Emacs，再使用命
令行命令"fg"或"%emacs"唤醒。
2. M-x :: 名称扩展。后跟一个名称。
如查找替换命令：执行M-x后在命令输入行内输入"replace-string"命令。

** 自动保存

以hello.c文件为例，当在Emacs中打开编辑时，同时会创建“#hello.c#”文件，
Emacs会定时自动保存缓存区的内容到此文件中。如果编辑时正常保存，保存时
会自动删除该文件；如果电脑崩溃，重新打开hello.c文件时，可使用M-x
recovery-file命令恢复上次编辑内容。

** 输出区域（ECHO AREA）

位于显示屏底部。当输入命令过慢时，已输入的命令会显示在此位置。

** 状态栏（MODE LINE）

位于输出区域上方。一般形式为：

 -:**- TUTORIAL 63% L749 (Fundamental)

从左到右依次的含义为：

- -:**- :: 冒号前为输入法，冒号后如果文件有改变且未保存则为星号，如果
           已保存，则为横线。
- TUTORIAL :: 文件名。
- 63% :: 从顶部到当前行所占整个文件的比例。如果在顶部则为"Top"，在底部
         为“Bot”，如果整个文档小至可单屏显示则为“ALL”。
- L749 :: 当前行数。
- (Fundamental) :: 括号内为当前编辑模式（mode）。编辑模式可分为“主模式
                   （Major Mode)”和“副模式（Minor Mode）”。

编辑单个文件时可有多种模式，其中一些为表示当前语言，如Lisp mode和Text
mode。每当一种模式开启时，其名称就会出现在括号内。

不同的主模式会让相同命令执行不同的行为。如为程序语言添加注释，不同语言
的注释标识各不相同。

- M-x 模式名 :: 添加/删除模式。如M-x text-mode将添加text模式，再执行相
                同命令则删除text模式。
- C-h m :: 查看当前主模式的文档。

副模式独立于主模式，且副模式之间相互独立，可单独打开或关闭。如编辑文本
文档时非常有用的Auto Fill模式，当此模式开启时，如果单行文本过长将自动
换行。

换行的字符长度默认为70，可使用C-x f修改。修改的方式有2种：

1. C-x f :: 根据提示输入字符长度。
2. C-u 20 C-x f :: 使用C-u前置参数。

- M-q :: 当没开启Auto Fill模式时，对段落实现自动换行。

** 搜索

- C-s :: 从光标处起向前搜索。
- C-r :: 从光标处向后搜索。

这两个命令的另一项功能为当搜索完成后，将光标移动到上一个匹配项目和下一
个匹配项目。

匹配过程中，如果希望光标停留到此处，使用<Return>；如果希望光标回到原处，
使用C-g。

** 多窗口

- C-x 2 :: 将当前显示区域分为2个，都显示当前文档。
- C-x o :: 当前窗口与“另一个”（最新打开的窗口）窗口间来回移动。
- C-M-v :: 使用“另一个”窗口的文档往下翻页。

** 多帧（仅限在图形界面上）

Emacs图像界面中所指的frame，与其他编辑器的window等价。

- M-x make-frame :: 新建帧。
- M-x delete-frame :: 删除帧。

新建帧与原帧相互独立，功能等价。

** 嵌套编辑层

如果状态栏的主模式名被方括号包裹，如[(Fundamental)]表示当前处于嵌套编
辑模式内。

- <ESC> <ESC> <ESC> :: 跳出嵌套编辑模式。此命令为终极“跳出”命令，还可
     用于消除多余窗口和跳出minibuffer（输出区）。

不能使用C-g跳出嵌套编辑模式。

** 获取帮助

- C-h ? ::  查看可执行的帮助命令。
- C-h c /命令/ :: 查看快捷键命令简短帮助文档。如C-h c C-p或C-h c C-x C-s。
- C-h k /命令/ :: 查看快捷键的完整帮助文。如C-h k C-p或C-h k C-x C-s。
- C-h f :: 查看函数帮助文档。如C-h f previous-line。
- C-h v :: 查看变量文档（含自定义变量）。
- C-h a /关键字/ :: 查看含使用M-x能执行命令的帮助文档。如C-h a buffer。
- C-h i :: 查看安装插件的帮助文档。

最后两个命令会进入"\*info\*"缓冲区，可使用'm /关键字/'查找。

** 更多特征

使用M-x输入命令时，可使用<Tab>实现自动不全。

- *C-h r :: 查看Emacs手册。*如其中的"Dired"章，介绍了如何执行访问、重命
           名和删除等文件操作命令。
